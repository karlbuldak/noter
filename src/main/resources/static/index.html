<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Notes App</title>
    <link rel="stylesheet" href="styles/style.css">
    <script src="https://cdn.tiny.cloud/1/h9g8j5qd5wap3iov2k5sify0p509xo5wj5y31g00jhxpm5cd/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
<!--    <script src="index.js"></script>-->
</head>
<body>
<h1>DODAJ SWOJĄ NOTATKĘ</h1>
<div>
    <textarea id="tiny"></textarea>
    <button id="saveButton">Zapisz notatkę</button>
</div>
<script>
    document.getElementById('saveButton').addEventListener('click', postNote);

    tinymce.init({
        selector: 'textarea#tiny',
        skin: "bootstrap"
    });

    function getContent(){
        return tinymce.get('tiny').getContent()
    }

    function postNote(){
        const content = getContent();
        fetch('http://localhost:8080/notes', {
            method: 'POST',
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(
                {
                    "author":"test",
                    "content":content
                })
        })
            .then(response => response.json())
            .then(response => console.log(JSON.stringify(response)))
    }

</script>
</body>
</html>
